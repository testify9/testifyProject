# CircleCI 2.1 configuration file
# Using the Orb aws-ecr to push the Docker Image to ECR: https://circleci.com/orbs/registry/orb/circleci/aws-ecr
# Using the Orb sonarcloud to analyse project with SonarQube: https://circleci.com/developer/orbs/orb/sonarsource/sonarcloud

version: 2.1
orbs:
  aws-ecr: circleci/aws-ecr@6.15.3
  browser-tools: circleci/browser-tools@1.2.3

executors:
  node-executor:
    docker:
      - image: cimg/node:14.18.2

base_build_job_config: &base_build_job_config
  context: SonarCloud

base_job_config: &base_job_config
  <<: *base_build_job_config
  requires:
    - build